package com.socialnetwork.mentis.data.paging\n\nimport androidx.paging.PagingSource\nimport androidx.paging.PagingState\nimport com.socialnetwork.mentis.domain.model.Post\nimport kotlinx.coroutines.delay\n\nclass PostPagingSource : PagingSource<Int, Post>() {\n\n    override fun getRefreshKey(state: PagingState<Int, Post>): Int? {\n        return state.anchorPosition?.let {\ anchorPosition ->\n            state.closestPageToPosition(anchorPosition)?.prevKey?.plus(1)\n                ?: state.closestPageToPosition(anchorPosition)?.nextKey?.minus(1)\n        }\n    }\n\n    override suspend fun load(params: LoadParams<Int>): LoadResult<Int, Post> {\n        return try {\n            val page = params.key ?: 1\n            // Simulate network delay\n            delay(1000)\n\n            // Generate some fake posts\n            val posts = (1..params.loadSize).map {\n                val id = (page - 1) * params.loadSize + it\n                Post(\n                    id = \"id_$id\",\n                    author = \"Author $id\",\n                    content = \"This is post number $id\"\n                )\n            }\n\n            LoadResult.Page(\n                data = posts,\n                prevKey = if (page == 1) null else page - 1,\n                nextKey = if (posts.isEmpty()) null else page + 1\n            )\n        } catch (e: Exception) {\n            LoadResult.Error(e)\n        }\n    }\n}